{% extends "base_layout.html" %}
{% load listtocolumns i18n tagutils urltag %}
{% block title %}{{ block.super }} | {% trans "Stats" %}{% endblock %}
{% block main_content %}
<small>
<form style="display:inline;" method="post">
{% csrf_token %}
{% with request.session.server as current_server %}
<select name="server" onchange="this.form.submit()">
{% for server in request.server_list %}
<option value="{{server.DB}}" {% if current_server == server.DB %}selected="selected"{%endif%}>{{server.NAME}}</option>
{% endfor %}
</select>
{% endwith %}
</form>
</small>
{% if knifers %}
<h3>{% trans "Top 5 Butchers" %}</h3>
<table class="stats">
<thead>
<tr>
<th>{%trans "Player"%}</th>
<th>{%trans "When" %}</th>
<th>{%trans "Map"%}</th>
<th>{%trans "Score"%}</th>
</tr>
</thead>
<tbody>
{% for obj in knifers %}
    <tr>
        <td class="nodecoration_icon medal_{{forloop.counter}}"><a href="{% serverurl client_detail obj.client.id %}">{{obj.client.name}}</a></td>
        <td>{{obj.time_add|date:"DATETIME_FORMAT"}}</td>
        <td>{{obj.map_name}}</td>
        <td>{{obj.score}}</td>
    </tr>
{% endfor %}
</tbody>
<tfoot>
<tr>
<td colspan="4"><a class="right link" href="{% url stats_kn_list %}" title="{% trans "Show all" %}">{% trans "More..."%}</a></td>
</tr>
</tfoot>
</table>
{% endif %}
{% if naders %}
<h3>{% trans "Top 5 HE Naders" %}</h3>
<table class="stats">
<thead>
<tr>
<th>{%trans "Player"%}</th>
<th>{%trans "When" %}</th>
<th>{%trans "Map"%}</th>
<th>{%trans "Score"%}</th>
</tr>
</thead>
<tbody>
{% for obj in naders %}
    <tr>
        <td class="nodecoration_icon medal_{{forloop.counter}}"><a href="{% serverurl client_detail obj.client.id %}">{{obj.client.name}}</a></td>
        <td>{{obj.time_add|date:"DATETIME_FORMAT"}}</td>
        <td>{{obj.map_name}}</td>
        <td>{{obj.score}}</td>
    </tr>
{% endfor %}
</tbody>
<tfoot>
<tr>
<td colspan="4"><a class="right link" href="{% url stats_he_list %}" title="{% trans "Show all" %}">{% trans "More..."%}</a></td>
</tr>
</tfoot>
</table>
{% endif %}
{% if mflags %}
<h3>{% trans "Top 5 Flag Thief" %}</h3>
<table class="stats">
<thead>
<tr>
<th>{%trans "Player"%}</th>
<th>{%trans "When" %}</th>
<th>{%trans "Map"%}</th>
<th>{%trans "Score"%}</th>
</tr>
</thead>
<tbody>
{% for obj in mflags %}
    <tr>
        <td class="nodecoration_icon medal_{{forloop.counter}}"><a href="{% serverurl client_detail obj.most_capture_client.id %}">{{obj.most_capture_client.name}}</a></td>
        <td>{{obj.most_capture_timeadd|date:"DATETIME_FORMAT"}}</td>
        <td>{{obj.mapname}}</td>
        <td>{{obj.most_capture_score}}</td>
    </tr>
{% endfor %}
</tbody>
<tfoot>
<tr>
<td colspan="4"><a class="right link" href="{% url stats_fm_list %}" title="{% trans "Show all" %}">{% trans "More..."%}</a></td>
</tr>
</tfoot>
</table>
{% endif %}

{% if qflags %}
<h3>{% trans "Top 5 Flag Runners" %}</h3>
<table class="stats">
<thead>
<tr>
<th>{%trans "Player"%}</th>
<th>{%trans "When" %}</th>
<th>{%trans "Map"%}</th>
<th>{%trans "Score"%}</th>
</tr>
</thead>
<tbody>
{% for obj in qflags %}
    <tr>
        <td class="nodecoration_icon medal_{{forloop.counter}}"><a href="{% serverurl client_detail obj.quick_capture_client.id %}">{{obj.quick_capture_client.name}}</a></td>
        <td>{{obj.quick_capture_timeadd|date:"DATETIME_FORMAT"}}</td>
        <td>{{obj.mapname}}</td>
        <td>{{obj.quick_capture_score}}</td>
    </tr>
{% endfor %}
</tbody>
<tfoot>
<tr>
<td colspan="4"><a class="right link" href="{% url stats_fq_list %}" title="{% trans "Show all" %}">{% trans "More..."%}</a></td>
</tr>
</tfoot>
</table>
{% endif %}
{% if not naders and not knifers and not qflags and not mflags %}
<ul class="messages">
    <li class="info">{% trans "Sorry, this server doesn't not save stats." %}</li>
</ul>
{% endif %}
{% endblock %}