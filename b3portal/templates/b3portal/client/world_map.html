{% extends "base_layout.html" %}
{% load i18n navigation %}
{% block title %}{{ block.super }} | {% trans "World Player Map" %}{% endblock %}
{% block extra_header %}
{{ block.super }}
<script type='text/javascript' src='http://www.google.com/jsapi'></script>
<script type='text/javascript'>
    google.load('visualization', '1', {'packages': ['geomap']});
    google.setOnLoadCallback(drawMap);

    function drawMap() {
        var data = new google.visualization.DataTable();
        data.addRows({{list|length}});
        data.addColumn('string', '{% trans "Country" %}');
        data.addColumn('number', '{% trans "Player Connections" %}');

        {% for key, value in list.items %}
        data.setValue({{forloop.counter0}},0,'{{key}}');
        data.setValue({{forloop.counter0}},1,{{value}});
        {% endfor %}

        var options = {};
        options['dataMode'] = 'regions';
        options['width'] = '800px';
        options['height'] = '550px';

        var container = document.getElementById('map-box');
        var geomap = new google.visualization.GeoMap(container);
        geomap.draw(data, options);
    };

</script>
{% endblock %}
{% block navigation2 %}
{% url world_map as url_nav_map %}
{% url admin_list as url_nav_admin_list %}
<li id="{% current_nav url_nav_map current2 %}"><a href="{{ url_nav_map }}">{% trans "World Map" %}</a></li>
{% if obj_perms.portal.viewclientgroup %}
<li id="{% current_nav url_nav_admin_list current2 %}"><a href="{{ url_nav_admin_list }}">{% trans "Admin List" %}</a></li>
{% endif %}
{% endblock %}
{% block main_content %}
<h3>{% trans "Players around the world" %}</h3>
<div id="map-box"></div>
{% endblock %}